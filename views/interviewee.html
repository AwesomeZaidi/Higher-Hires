<!DOCTYPE html
      PUBLIC "-//W3C//DTD HTML 4.01//EN"
      "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en-US">
<head profile="http://www.w3.org/2005/10/profile">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
  <style>
      body {
    /*background: url(http://parque5julho.com/wp-content/uploads/2014/02/116.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    font-family: 'Ubuntu', sans-serif;
    }
    */  
  </style>

<link rel="icon"
    type="image/png"
    href="https://raw.githubusercontent.com/arjunmehta/heartbeats/image/heartbeats.png">

      <!-- Materialize -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <script src="https://cdn.pubnub.com/pubnub-3.7.14.min.js"></script>
    <script src="https://cdn.pubnub.com/webrtc/webrtc.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>

</head>

<body>

    <center>
        <div id="vid-box"></div>    
    </center>

    <button class="waves-effect waves-light orange darken-1 btn" onclick="login()">Ready?</button>
    <button class="waves-effect waves-light orange darken-1 btn" onclick="makeCall()">Call</button>

    <script type="text/javascript">

        var video_out = document.getElementById("vid-box");
        function login() {
            var phone = window.phone = PHONE({
                //number        :  form.username.value || "Anonymous", // listen on username line else Anonymous
                number        :  1, // listen on username line else Anonymous
                publish_key   : 'pub-c-957a43c5-b37b-43b7-a7f7-1a1ff3231807',
                subscribe_key : 'sub-c-7fe1cca8-e088-11e6-884c-0619f8945a4f',
            });

            phone.receive(function(session){
                session.connected(function(session) { video_out.appendChild(session.video); });
                session.ended(function(session) { video_out.innerHTML=''; });
            });
        return false;   // So the form does not submit.
        }

        function makeCall(){
            if (!window.phone) alert("Login First!");
            else phone.dial(2);
            return false;
        }

    </script>

</body>
</html>
